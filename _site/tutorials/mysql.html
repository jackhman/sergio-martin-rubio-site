<!DOCTYPE html>

<!--
  portfolYOU Jekyll theme by Youssef Raafat
  Free for personal and commercial use under the MIT license
  https://github.com/YoussefRaafatNasry/portfolYOU
-->

<html lang="en" class="h-100">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Always code as if the guy who ends up maintaining your code will be a violent psychopath who knows where you live.">

  <title>Sergio Martin Rubio</title>
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico">

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">

  <!-- Bootstrap CSS CDN -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

  <!-- Animate CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css" type="text/css"/>
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/style.css" type="text/css">

    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Sergio Martin Rubio" />

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-137749111-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-137749111-1');
</script>


  
  </head>

<body class="d-flex flex-column h-100">

  <main class="flex-shrink-0 container mt-5">
  <nav class="navbar navbar-expand-lg navbar-light">

  <a class="navbar-brand" href="/"><h5><b>Sergio Martin Rubio</b></h5></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav ml-auto">
      
      
        
      
        
          
        
      
        
      
        
          
        
      
        
          
            <a class="nav-item nav-link " href=" /articles/ ">Articles</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <a class="nav-item nav-link " href=" /projects/ ">Projects</a>
          
        
      
        
          
            <a class="nav-item nav-link " href=" /about/ ">About</a>
          
        
      
    </div>
  </div>

</nav>
  <div class="col-lg-10 mx-auto mt-5 article">
  
<div class="list-group my-3">

  
    <a class="list-group-item list-group-item-action active disabled text-white">Table of Contents</a>
  

  
    
      <a class="list-group-item list-group-item-action" href="#access">Access</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#server-info">
Server Info</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#db-info">
DB Info</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#use-database">
Use Database</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#create-database">
Create Database</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#delete-database">
Delete Database</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#create-table">
Create Table</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#delete-table">
Delete Table</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#rename-table">
Rename Table</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#table-attributes">
Table Attributes</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#column-types">
Column Types</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#modify-table">
Modify Table</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#table-engines">
Table Engines</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#load-databases">
Load Databases</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#queries">
Queries</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#where-clause">
WHERE clause</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#limit-clause">
LIMIT clause</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#sorting-order-by">
Sorting (ORDER BY)</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#agregate-functions">
Agregate Functions</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#grouping-group-by-having">
Grouping (GROUP BY, HAVING)</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#subqueries">
Subqueries</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#join-clauses">
Join clauses</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#derived-tables">
Derived Tables</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#insert-syntax">
INSERT syntax</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#update-table">
Update Table</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#delete-entries">
Delete Entries</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#transactional-statements">
Transactional statements</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#account-management">
Account Management</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#create-user">
Create User</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#remove-user">
Remove User</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#give-privileges">
Give Privileges</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#revoke-privilege">
Revoke Privilege</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#show-privileges">
Show Privileges</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#backup-and-recovery">
Backup and Recovery</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#views">
Views</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#create-view">
Create View</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#modify-view">
Modify View</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#remove-view">
Remove View</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#retrieve-views">
Retrieve Views</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#triggers">
Triggers</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#create-a-trigger">
Create a Trigger</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#delete-a-trigger">
Delete a Trigger</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#show-triggers">
Show Triggers</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#events">
Events</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#create-event">
Create Event</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#modify-event">
Modify Event</a>
    
  
    
      <a class="list-group-item list-group-item-action" href="#show-events">
Show Events</a>
    
  

</div>

<h2 id="access">Access</h2>

<p>You can acceess a MySQL DB with the following command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> &lt;username&gt; <span class="nt">-p</span>&lt;password&gt; <span class="nt">-h</span> &lt;host&gt; <span class="nt">--port</span> &lt;port_number&gt;
</code></pre></div></div>

<p>e.g.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> sergio <span class="nt">-p123456</span> <span class="nt">-h</span> 192.168.0.5 <span class="nt">--port</span> 3306
</code></pre></div></div>

<h2 id="server-info">Server Info</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">VERSION</span><span class="p">();</span>

<span class="k">SELECT</span> <span class="k">CURRENT_DATE</span><span class="p">();</span>

<span class="n">STATUS</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="db-info">DB Info</h2>

<p>Show existing databases:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="n">DATABASES</span><span class="p">;</span>
</code></pre></div></div>

<p>Show information about existing tables:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="n">TABLES</span><span class="p">;</span>

<span class="cm">/* Show table columns */</span>
<span class="k">DESCRIBE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">;</span>

<span class="cm">/* Show table creation command */</span>
<span class="k">SHOW</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="use-database">Use Database</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">USE</span> <span class="o">&lt;</span><span class="n">db_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="create-database">Create Database</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="o">&lt;</span><span class="n">db_name</span><span class="o">&gt;</span> <span class="n">CHARACTER</span> <span class="k">SET</span> <span class="o">&lt;</span><span class="n">character_set</span><span class="o">&gt;</span> <span class="k">COLLATE</span> <span class="o">&lt;</span><span class="k">collation_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<p>e.g.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="n">DATATABSE</span> <span class="n">contacts</span> <span class="n">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">COLLATE</span> <span class="n">utf8_spanish_ci</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="delete-database">Delete Database</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">DATABASE</span> <span class="o">&lt;</span><span class="n">db_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="create-table">Create Table</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">columns_name_type_and_attributes</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">table_options</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<p>e.g.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">user</span><span class="p">(</span>
    <span class="n">email</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">name</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">age</span> <span class="n">INTEGER</span><span class="p">,</span>
    <span class="n">date_time</span> <span class="k">TIMESTAMP</span>
<span class="p">)</span><span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span><span class="p">;</span>
</code></pre></div></div>

<p>You can also copy an existing table schema:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="n">new_table_name</span><span class="o">&gt;</span> <span class="k">LIKE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="delete-table">Delete Table</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>Note: This will also delete all the entries stored in the table.</p>
</blockquote>

<h2 id="rename-table">Rename Table</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">RENAME</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">TO</span> <span class="o">&lt;</span><span class="n">new_table_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="table-attributes">Table Attributes</h2>

<ul>
  <li><code class="highlighter-rouge">NOT NULL</code>:</li>
</ul>

<p>The column does not allow null entries.</p>

<ul>
  <li><code class="highlighter-rouge">NULL</code>:</li>
</ul>

<p>The column allows null entries.</p>

<ul>
  <li><code class="highlighter-rouge">DEFAULT</code>:</li>
</ul>

<p>It allows you to set a default value and use it in case of null.</p>

<p>e.g.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post_code</span> <span class="k">DEFAULT</span> <span class="n">W2</span> <span class="mi">3</span><span class="n">ES</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">PRIMARY KEY</code>:</li>
</ul>

<p>The primary key constraint identify unique records in a table and only one primery key is allowed per table, however you can define a compound primary key wich contains multiple columns.</p>

<p>How to set:</p>

<ol>
  <li>Next to the column name:</li>
</ol>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="p">...</span>
<span class="p">);</span>
</code></pre></div></div>

<ol>
  <li>As a separate declaration:</li>
</ol>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="p">...,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<blockquote>
  <p>Note: The second way is required when the primary is compound.
e.g.</p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">contact</span><span class="p">(</span>
    <span class="n">id</span> <span class="n">INTEGER</span><span class="p">,</span>
    <span class="n">email</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
    <span class="p">...,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">UNIQUE KEY</code>:</li>
</ul>

<p>Same as <code class="highlighter-rouge">PRIMARY KEY</code> but it allows null entries.</p>

<ul>
  <li><code class="highlighter-rouge">FOREIGN KEY</code>:</li>
</ul>

<p>They are used to link two tables. A foreign key is a column in a table that points to a primary key of another table.</p>

<p>How to set:</p>

<ol>
  <li>Next to the column name:</li>
</ol>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="o">&lt;</span><span class="n">another_table_name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">another_column_name</span><span class="o">&gt;</span><span class="p">),</span>
    <span class="p">...</span>
<span class="p">);</span>
</code></pre></div></div>

<ol>
  <li>As a separate declaration:</li>
</ol>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="p">...,</span>
    <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="o">&lt;</span><span class="n">another_table_name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">another_column_name</span><span class="o">&gt;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">ON DELETE</code> and <code class="highlighter-rouge">ON UPDATE</code>:</li>
</ul>

<p>MySQL provides some actions to automate changes from children tables which refer to a parent table:</p>

<ul>
  <li><code class="highlighter-rouge">NO ACTION</code>: not changes will be made to children tables.</li>
  <li><code class="highlighter-rouge">CASCADE</code>: it will update or delete entries on children tables.</li>
  <li><code class="highlighter-rouge">SET NULL</code>: the foreign key of the children tables will be set to null in case of change or deletion.</li>
</ul>

<blockquote>
  <p>All these operation will only affect foreign keys.</p>
</blockquote>

<p>e.g.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">pet</span><span class="p">(</span>
    <span class="n">code</span> <span class="n">INTEGER</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">name</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
    <span class="k">type</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
    <span class="n">client</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">client</span><span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">ON</span> <span class="k">DELETE</span> <span class="k">CASCADE</span> <span class="k">ON</span> <span class="k">UPDATE</span> <span class="k">SET</span> <span class="k">NULL</span>
<span class="p">);</span>
</code></pre></div></div>

<p>For this particular example if one of the records is deleted from <code class="highlighter-rouge">client</code>, all the entries in the table <code class="highlighter-rouge">pet</code> with the matching client <code class="highlighter-rouge">id</code> will be deleted. In case of an update all the pet entries with the same client <code class="highlighter-rouge">id</code> will be set to 0. Alternativily you could set the foreign key as <code class="highlighter-rouge">NO ACTION</code>, and nothing will change in the <code class="highlighter-rouge">pet</code> table when changes are made on <code class="highlighter-rouge">client</code> table.</p>

<blockquote>
  <p>Note: On delete and on update only work for with tables with store engines that support foreign keys like InnoDB.</p>
</blockquote>

<ul>
  <li><code class="highlighter-rouge">AUTO_INCREMENT</code>:</li>
</ul>

<p>It allows you to generate unique value for new rows and every time a new record is added the field gets incremented.</p>

<ul>
  <li><code class="highlighter-rouge">CHARACTER SET</code>:</li>
</ul>

<p>MySQL support multiple charater sets to define what characters are legal in your table.</p>

<p>To get avaialble character sets:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="n">CHARACTER</span> <span class="k">SET</span><span class="p">;</span>
</code></pre></div></div>

<p>The character set can be specified for at a database or table level.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="o">&lt;</span><span class="n">db_name</span><span class="o">&gt;</span>
    <span class="n">CHARACTER</span> <span class="k">SET</span> <span class="k">character_set_name</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">(</span>
   <span class="p">...</span>
<span class="p">)</span>
<span class="n">CHARACTER</span> <span class="k">SET</span> <span class="o">&lt;</span><span class="k">character_set_name</span><span class="o">&gt;</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">CHECKSUM</code>:</li>
</ul>

<p>It generates a number based on the table content. This could take a long time if the table is very large.</p>

<ul>
  <li><code class="highlighter-rouge">COMMENT</code>:</li>
</ul>

<p>Comments can be added when a table is created.</p>

<ul>
  <li><code class="highlighter-rouge">MAX_ROWS</code>:</li>
</ul>

<p>It is the maximum number of entries you are planning to store in a table, but is not a hard limit and only a hint.</p>

<ul>
  <li><code class="highlighter-rouge">MIN_ROWS</code>:</li>
</ul>

<p>It is just a hint for the engine about the memory use.</p>

<h2 id="column-types">Column Types</h2>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
      <th>Size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">INT</code></td>
      <td>Integer</td>
      <td>4 bytes</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DOUBLE</code></td>
      <td>A normal precision number</td>
      <td>8 bytes</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FLOAT</code></td>
      <td>A mall precision number</td>
      <td>4 bytes</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DECIMAL</code></td>
      <td>Exact decimal number</td>
      <td>variable</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">BOOLEAN</code></td>
      <td>0 is false and 1 true</td>
      <td>1 byte</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">YEAR</code></td>
      <td>A year in four-digit format <code class="highlighter-rouge">YYYY</code></td>
      <td>1 byte</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DATE</code></td>
      <td>A date <code class="highlighter-rouge">aaaa-mm-dd</code></td>
      <td>3 bytes</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TIME</code></td>
      <td>A time <code class="highlighter-rouge">hh:mm:ss</code></td>
      <td>3 bytes</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DATETIME</code></td>
      <td>Date and time <code class="highlighter-rouge">aaaa-mm-dd hh:mm:ss</code></td>
      <td>8 bytes</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TIMESTAMP</code></td>
      <td>Stores time as an integer <code class="highlighter-rouge">aaaa-mm-dd hh:mm:ss</code></td>
      <td>4 bytes</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHAR</code></td>
      <td>Characters fix-length defined when stored</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">VARCHAR</code></td>
      <td>Characters</td>
      <td>variable-length string</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">BLOB</code></td>
      <td>Binary objects like pictures</td>
      <td>variable</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">TEXT</code></td>
      <td>Texts</td>
      <td>variable</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ENUM</code></td>
      <td>It is a string with a value chosen from a list of values</td>
      <td>1 or 2 bytes</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">SET</code></td>
      <td>It can have zero or more values from a list of allowed values</td>
      <td>1, 2, 3, 4, or 8 bytes</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><code class="highlighter-rouge">TIMESTAMP</code> only allows dates between <code class="highlighter-rouge">1970-01-01 00:00:00 UTC</code> and <code class="highlighter-rouge">2038-19-01 03:14:07 UTC</code></p>
</blockquote>

<h2 id="modify-table">Modify Table</h2>

<ul>
  <li>Add column:</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">ADD</span> <span class="o">&lt;</span><span class="n">new_column_name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">columns_type_and_attributes</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="k">AFTER</span><span class="o">/</span><span class="k">FIRST</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>Modify column type:</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">MODIFY</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">columns_type</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>Remove primary key and foreign key restrictions:</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">DROP</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>Remove column:</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">DROP</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>Change column name:</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="n">CHANGE</span> <span class="o">&lt;</span><span class="n">old_name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">new_name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">columns_type_and_attributes</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="table-engines">Table Engines</h2>

<p>Set table engine:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="p">...</span>
    <span class="p">)</span><span class="n">ENGINE</span><span class="o">=&lt;</span><span class="n">engine_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<p>Each DB engine has different features like table struture, therefore you have to decide which one is better for your use case.</p>

<ol>
  <li>
    <p><strong>InnoDB</strong>: Generates three files for each table, allows foreign keys, transactions, entry blocks, integrity control… and as a result the performance is lower.</p>
  </li>
  <li>
    <p><strong>MyISAM</strong>: Creates a single file for each table and other files in shared folders. The performance is higher than InnoDB since it contains fewer checks. One of the main disadvanges is that it does not allow foreign keys.</p>
  </li>
  <li>
    <p><strong>MemoryEngine</strong>: It uses volatile memory and as a result is much faster, however everything is gone after each session.</p>
  </li>
</ol>

<blockquote>
  <p>The default engine in <em>Linux OS</em> is <em>MyISAM</em> and in <em>Windows OS</em> is <em>InnoDB</em>.</p>
</blockquote>

<h2 id="load-databases">Load Databases</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SOURCE</span> <span class="n">path_to_file</span><span class="o">/</span><span class="n">file_name</span><span class="p">.</span><span class="k">sql</span>
</code></pre></div></div>

<p>You can also load <code class="highlighter-rouge">sql</code> files from non interactive mode:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> &lt;username&gt; <span class="nt">-p</span>&lt;password&gt; &lt; path_to_file/file_name.sql
</code></pre></div></div>

<h2 id="queries">Queries</h2>

<h3 id="select-expression">SELECT expression</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<p>To return only different values:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>You can display data by chunks with the option <code class="highlighter-rouge">\G</code> at the end of the query.</p>
</blockquote>

<h3 id="where-clause">WHERE clause</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>You can use more than one condition by using logic operands: <code class="highlighter-rouge">&amp;&amp;</code>, <code class="highlighter-rouge">||</code>…</p>
</blockquote>

<p>Condition operators:</p>

<ul>
  <li><strong>Numeric operators</strong>: <code class="highlighter-rouge">+</code>, <code class="highlighter-rouge">-</code>, <code class="highlighter-rouge">*</code>, <code class="highlighter-rouge">/</code>, <code class="highlighter-rouge">%</code></li>
  <li><strong>Rational operators</strong>: <code class="highlighter-rouge">&gt;</code>, <code class="highlighter-rouge">&lt;</code>, <code class="highlighter-rouge">&lt;&gt;</code> (<code class="highlighter-rouge">!=</code>), <code class="highlighter-rouge">&gt;=</code>, <code class="highlighter-rouge">&lt;=</code>, <code class="highlighter-rouge">=</code></li>
  <li><strong>Logical operators</strong>: <code class="highlighter-rouge">AND</code>(<code class="highlighter-rouge">&amp;&amp;</code>), <code class="highlighter-rouge">OR</code>(<code class="highlighter-rouge">||</code>), <code class="highlighter-rouge">NOT</code></li>
</ul>

<p>Select rows with an assined group:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span>
    <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
    <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span> <span class="k">IN</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">value_1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value_2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...);</span>
</code></pre></div></div>

<p>e.g.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">nationality</span>
    <span class="k">FROM</span> <span class="n">player</span>
    <span class="k">WHERE</span> <span class="n">team_name</span><span class="o">=</span><span class="s1">'Lakers'</span> <span class="k">AND</span> <span class="n">nationality</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">'Spain'</span><span class="p">,</span> <span class="s1">'Slovenia'</span><span class="p">,</span> <span class="s1">'Serbia'</span><span class="p">);</span>
</code></pre></div></div>

<p>To retrieve values within a range:</p>

<p>The <code class="highlighter-rouge">BETWEEN</code> expression allows you to select entries in an specific range.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span> <span class="k">BETWEEN</span> <span class="o">&lt;</span><span class="n">lower_value</span><span class="o">&gt;</span> <span class="k">AND</span> <span class="o">&lt;</span><span class="n">upper_value</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<p>To search for a specified pattern in a column:</p>

<ul>
  <li><code class="highlighter-rouge">%</code>: any number of characters.</li>
  <li><code class="highlighter-rouge">_</code>: single character.</li>
</ul>

<p>e.g.</p>

<p>All entry which contains <em>name</em>.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span> <span class="k">LIKE</span> <span class="s1">'%name%'</span><span class="p">;</span>
</code></pre></div></div>

<p>All entries wich contains R as the first letter, S as the last letter and</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span> <span class="k">LIKE</span> <span class="s1">'R_ _ _ _ _S'</span><span class="p">;</span>
</code></pre></div></div>

<p>All entries wich contains ‘o’ on the second position.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span> <span class="k">LIKE</span> <span class="s1">'_o%'</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="limit-clause">LIMIT clause</h3>

<p>To constrain the number of rows to return:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">LIMIT</span> <span class="o">&lt;</span><span class="n">number_of_rows</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<p>To constrain the number of rows to return with an offset.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">LIMIT</span> <span class="o">&lt;</span><span class="k">offset</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">number_of_rows</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="sorting-order-by">Sorting (ORDER BY)</h3>

<p>You can sort table rows by columns with the following sintax:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">another_column_name</span><span class="o">&gt;</span>
    <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
    <span class="k">ORDER</span> <span class="k">BY</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">another_column_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>Note: the first specified column with have precedence when sorting.</p>
</blockquote>

<p>To sort in reverse order you need to add <code class="highlighter-rouge">DESC</code> keyword at the end.</p>

<h3 id="agregate-functions">Agregate Functions</h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">SUM(&lt;expression&gt;)</code></td>
      <td>Return the sum</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">AVG(&lt;expression&gt;)</code></td>
      <td>Return the average value of the argument</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MIN(&lt;expression&gt;)</code></td>
      <td>Return the minimum value</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MAX(&lt;expression&gt;)</code></td>
      <td>Return the maximum value</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">COUNT(&lt;expression&gt;)</code></td>
      <td>Returns a count of the number of non-NULL values</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>Note: <code class="highlighter-rouge">COUNT(*)</code> will return the total number of rows in a table.</p>
</blockquote>

<h3 id="grouping-group-by-having">Grouping (GROUP BY, HAVING)</h3>

<p>The <code class="highlighter-rouge">GROUP BY</code> keyword groups table rows into a set of rows by values of columns or expressions. It will return one row for each group.</p>

<p>e.g.</p>

<p>The following query will return the number of vehicle by brand.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">brand</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">vehicle</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">brand</span><span class="p">;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">HAVING</code> clause is usually used in combination with <code class="highlighter-rouge">GROUP BY</code> clause to filter groups based on a specified condition. When <code class="highlighter-rouge">GROUP BY</code> is not specified <code class="highlighter-rouge">HAVING</code> behaves in the same way as <code class="highlighter-rouge">WHERE</code> clause.</p>

<blockquote>
  <p>Note: <code class="highlighter-rouge">HAVING</code> clause must come after any <code class="highlighter-rouge">GROUP BY</code> clause and before any <code class="highlighter-rouge">ORDER BY</code> clause.</p>
</blockquote>

<blockquote>
  <p>Note: you should NOT use <code class="highlighter-rouge">WHERE</code> clause to filter groups, since <code class="highlighter-rouge">WHERE</code> will do the filtering before <code class="highlighter-rouge">GROUP BY</code>.</p>
</blockquote>

<p>e.g.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">team_name</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
    <span class="k">FROM</span> <span class="n">player</span>
    <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">team_name</span>
    <span class="k">HAVING</span> <span class="k">AVG</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">228</span>
    <span class="k">ORDER</span> <span class="k">BY</span> <span class="k">AVG</span><span class="p">(</span><span class="n">weight</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="subqueries">Subqueries</h3>

<p>Subqueries are nested queries. Inner subqueries will run first and then the outer query. Subqueries can be use in combination with <code class="highlighter-rouge">WHERE</code> and <code class="highlighter-rouge">HAVING</code> clause.</p>

<p>Comparison operators:</p>

<ul>
  <li><code class="highlighter-rouge">=</code>: returns a single value.</li>
  <li><code class="highlighter-rouge">=</code>, <code class="highlighter-rouge">&lt;</code>, <code class="highlighter-rouge">&gt;</code>, <code class="highlighter-rouge">&gt;=</code>, <code class="highlighter-rouge">&lt;=</code>, <code class="highlighter-rouge">&lt;&gt;</code>: to compare</li>
</ul>

<blockquote>
  <p>Note: You can also do subquery of another subquery, and this is called nested subqueries.</p>
</blockquote>

<ul>
  <li><code class="highlighter-rouge">IN</code>: returns values that match with an expression.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span>
    <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
    <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span>
    <span class="k">IN</span> <span class="p">(</span>
        <span class="k">SELECT</span> <span class="o">&lt;</span><span class="n">inner_table_column_name</span><span class="o">&gt;</span>
        <span class="k">FROM</span> <span class="o">&lt;</span><span class="n">inner_table_name</span><span class="o">&gt;</span>
        <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span>
    <span class="p">);</span>
</code></pre></div></div>

<ul>
  <li>
    <p><code class="highlighter-rouge">ALL</code>: it must follow a comparison operator and will return <code class="highlighter-rouge">TRUE</code> if all the values returned by the subquery satisfy the condition.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">ANY</code> or <code class="highlighter-rouge">SOME</code>: it must follow a comparison operator and will return <code class="highlighter-rouge">TRUE</code> if any of the values returned by the subquery satisfy the condition.</p>
  </li>
</ul>

<p>The following example will return the name and weight of the players who have position ‘G’ and whose weight is greater than any player whose position is ‘C’.
e.g.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">weight</span>
    <span class="k">FROM</span> <span class="n">player</span>
    <span class="k">WHERE</span> <span class="k">position</span> <span class="o">=</span><span class="s1">' G'</span> <span class="k">AND</span> <span class="n">weight</span> <span class="o">&gt;</span> <span class="k">ANY</span> <span class="p">(</span>
        <span class="k">SELECT</span> <span class="n">weight</span>
        <span class="k">FROM</span> <span class="n">player</span>
        <span class="k">WHERE</span> <span class="k">position</span> <span class="o">=</span> <span class="s1">'C'</span>
    <span class="p">);</span>
</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">EXISTS</code> or <code class="highlighter-rouge">NOT EXISTS</code></li>
</ul>

<p>It returns <code class="highlighter-rouge">TRUE</code>if the inner table contains any rows.</p>

<p>e.g.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">store_type</span>
    <span class="k">FROM</span> <span class="n">store</span>
    <span class="k">WHERE</span> <span class="k">EXISTS</span> <span class="p">(</span>
        <span class="k">SELECT</span> <span class="o">*</span>
        <span class="k">FROM</span> <span class="n">city_store</span>
        <span class="k">WHERE</span> <span class="n">city_store</span><span class="p">.</span><span class="n">store_type</span> <span class="o">=</span> <span class="n">store</span><span class="p">.</span><span class="n">store_type</span>
    <span class="p">);</span>
</code></pre></div></div>

<h3 id="join-clauses">Join clauses</h3>

<h4 id="the-full-join">The Full Join</h4>

<p>It is also called cross join because each row of each table is crossed with each row in every other table and generates a cartesian product. This is not very useful, since it generates unrelated rows, so you need to use the <code class="highlighter-rouge">WHERE</code> clause in order to match columns from two tables.</p>

<h4 id="join-syntax">JOIN syntax</h4>

<p>The <code class="highlighter-rouge">JOIN</code> syntax is an alternative to the full join with conditions. Some of the options are:</p>

<ol>
  <li><code class="highlighter-rouge">INNER JOIN</code>: same as full join but replace <code class="highlighter-rouge">WHERE</code> with <code class="highlighter-rouge">ON</code>;</li>
  <li><code class="highlighter-rouge">NATURAL JOIN</code>: it will match columns from two tables which have same name.</li>
  <li><code class="highlighter-rouge">RIGHT OUTER JOIN</code> and <code class="highlighter-rouge">LEFT OUTER JOIN</code>: they will return the matched rows and the unmatched rows from the right or left.</li>
</ol>

<p>e.g.
Return all the pets even if some they do not have an owner.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span>
    <span class="k">FROM</span> <span class="n">pet</span> <span class="k">LEFT</span> <span class="k">OUTER</span> <span class="k">JOIN</span> <span class="k">owner</span>
    <span class="k">ON</span> <span class="n">pet</span><span class="p">.</span><span class="k">owner</span><span class="o">=</span><span class="k">owner</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
</code></pre></div></div>

<ol>
  <li><code class="highlighter-rouge">UNION</code>: to combine <code class="highlighter-rouge">RIGHT OUTER JOIN</code> and <code class="highlighter-rouge">LEFT OUTER JOIN</code>.</li>
</ol>

<p>e.g.
Return all the owners without pets and all the pets without owners.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">pet</span> <span class="k">LEFT</span> <span class="k">OUTER</span> <span class="k">JOIN</span> <span class="k">owner</span> <span class="k">ON</span> <span class="n">pet</span><span class="p">.</span><span class="k">owner</span><span class="o">=</span><span class="k">owner</span><span class="p">.</span><span class="n">id</span>
    <span class="k">UNION</span>
    <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">pet</span> <span class="k">RIGHT</span> <span class="k">OUTER</span> <span class="k">JOIN</span> <span class="k">owner</span> <span class="k">ON</span> <span class="n">pet</span><span class="p">.</span><span class="k">owner</span><span class="o">=</span><span class="k">owner</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="self-join">Self Join</h4>

<p>When you need to join a table with itself you can use self join queries. To join a table to itself you need to give the table an alias and then select from both the table and its alias.</p>

<p>e.g.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">CONCAT</span><span class="p">(</span><span class="n">emp</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">' '</span><span class="p">,</span> <span class="n">emp</span><span class="p">.</span><span class="n">surname</span><span class="p">)</span> <span class="k">AS</span> <span class="n">employee</span><span class="p">,</span> <span class="n">CONCAT</span><span class="p">(</span><span class="n">manager</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">' '</span><span class="p">,</span> <span class="n">manager</span><span class="p">.</span><span class="n">surname</span><span class="p">)</span> <span class="k">AS</span> <span class="n">manager</span>
    <span class="k">FROM</span> <span class="n">employee</span> <span class="n">emp</span> <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">employee</span> <span class="n">manager</span> <span class="k">ON</span> <span class="n">emp</span><span class="p">.</span><span class="n">manager_id</span><span class="o">=</span><span class="n">manager</span><span class="p">.</span><span class="n">employee_id</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="derived-tables">Derived Tables</h3>

<p>A derived table is a subquery that can take the place of a table in the <code class="highlighter-rouge">FROM</code>.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span>
    <span class="k">FROM</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">)</span>
    <span class="k">AS</span> <span class="o">&lt;</span><span class="n">temp_table</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<p>The dereived table will only exist during the query.</p>

<h2 id="insert-syntax">INSERT syntax</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">column_one_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">column_two_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...)</span>
    <span class="k">VALUES</span><span class="p">(</span><span class="o">&lt;</span><span class="n">value_one</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value_two</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...);</span>
</code></pre></div></div>

<blockquote>
  <p>Note: You can ommit column names if all the values are provides in the correct order.</p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
    <span class="k">VALUES</span><span class="p">(</span><span class="o">&lt;</span><span class="n">value_one</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value_two</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...);</span>
</code></pre></div></div>

<blockquote>
  <p>Note: For string values single quotes are mandatory.</p>
</blockquote>

<p>You can also use the <code class="highlighter-rouge">DEFAULT</code> keyword in order to use the default value set during the table creation.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
    <span class="k">VALUES</span><span class="p">(</span><span class="o">&lt;</span><span class="n">value_one</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value_two</span><span class="o">&gt;</span><span class="p">,</span> <span class="k">DEFAULT</span><span class="p">);</span>
</code></pre></div></div>

<p>If you need to add more than one entry you can take advantage of the extended version of the <code class="highlighter-rouge">INSERT</code> clause:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">column_one_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">column_two_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...)</span>
    <span class="k">VALUES</span><span class="p">(</span><span class="o">&lt;</span><span class="n">value_one</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value_two</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...),</span>
    <span class="k">VALUES</span><span class="p">(</span><span class="o">&lt;</span><span class="n">value_one</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value_two</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...),</span>
    <span class="k">VALUES</span><span class="p">(</span><span class="o">&lt;</span><span class="n">value_one</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">value_two</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...);</span>
</code></pre></div></div>

<blockquote>
  <p>Note: Remember that primary key column do not allow duplicated values.</p>
</blockquote>

<p>Moreover, you can also copy rows from one table into another if you combine the <code class="highlighter-rouge">INSERT</code> and the <code class="highlighter-rouge">SELECT</code> clause.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
    <span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="n">another_table_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>Note: The table where the rows are pasted must exists and will copy only values.</p>
</blockquote>

<h2 id="update-table">Update Table</h2>

<p>The <code class="highlighter-rouge">UPDATE</code> statement updates columns of existing rows.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">UPDATE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">SET</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">new_value</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="delete-entries">Delete Entries</h2>

<p>The <code class="highlighter-rouge">DELETE</code> clause is used to delete data from a table.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DELETE</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="transactional-statements">Transactional statements</h2>

<p>A transaction is a set of grouped statements and defined as a single unit of work, this means that if a transaction is successful, all the modifucations will be saved and became permanent part of the database, otherwise the transaction will be cancelled and rolled back. MySQL provides the following sintax to use transactions:</p>

<ul>
  <li><code class="highlighter-rouge">START TRANSACTION</code> or <code class="highlighter-rouge">BEGIN {WORK}</code>: To start a new transaction.</li>
  <li><code class="highlighter-rouge">COMMIT</code>: Statements are accepted.</li>
  <li><code class="highlighter-rouge">ROLLBACK</code>: Cancell current changes.</li>
  <li><code class="highlighter-rouge">SET AUTOCOMMIT={0|1}</code>: It disables or enables the default autocommit mode for the current session.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">START</span> <span class="n">TRANSACTION</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">@</span><span class="n">A</span><span class="p">:</span><span class="o">=</span><span class="k">SUM</span><span class="p">(</span><span class="o">&lt;</span><span class="k">column_name</span><span class="p">)</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="n">first_table_name</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">UPDATE</span> <span class="o">&lt;</span><span class="n">second_table_name</span> <span class="k">SET</span> <span class="o">&lt;</span><span class="k">column_name</span><span class="o">&gt;=@</span><span class="n">A</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">COMMIT</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="account-management">Account Management</h2>

<h3 id="create-user">Create User</h3>

<p>The <code class="highlighter-rouge">CREATE USER</code> clause creates new MySQL accounts and it enables authentication, SSL/TLS, resource access limitations and password management.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'&lt;user_name&gt;'</span><span class="o">@</span><span class="s1">'&lt;host_name&gt;'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'&lt;password&gt;'</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>Note: if the host name part is omitted, it defaults to <code class="highlighter-rouge">%</code>, which means that all the hosts are allowed for the new user.</p>
</blockquote>

<p>Users are created in <code class="highlighter-rouge">mysql.user</code> table, so they can be retrieved with the following SQL query:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">mysql</span><span class="p">.</span><span class="k">user</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="k">host</span><span class="p">,</span> <span class="k">user</span><span class="p">,</span> <span class="n">password</span> <span class="k">FROM</span> <span class="n">mysql</span><span class="p">.</span><span class="k">user</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="remove-user">Remove User</h3>

<p><code class="highlighter-rouge">DROP USER</code> sintax deletes one or more MySQL accounts.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">USER</span> <span class="s1">'&lt;user_name&gt;'</span><span class="o">@</span><span class="s1">'&lt;host_name&gt;'</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="give-privileges">Give Privileges</h3>

<p>Users can get permission with the <code class="highlighter-rouge">GRANT</code> clause.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">GRANT</span> <span class="o">&lt;</span><span class="k">option</span><span class="o">&gt;</span> <span class="k">ON</span> <span class="o">&lt;</span><span class="n">db_name</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">TO</span> <span class="s1">'&lt;user_name&gt;'</span><span class="o">@</span><span class="s1">'&lt;host_name&gt;'</span><span class="p">;</span>
</code></pre></div></div>

<p>Some of the options available:</p>

<ul>
  <li><code class="highlighter-rouge">ALL PRIVILEGES</code> -&gt; total access</li>
  <li><code class="highlighter-rouge">CREATE</code> -&gt; enables database and table creation</li>
  <li><code class="highlighter-rouge">DELETE</code> -&gt; enables the use of <code class="highlighter-rouge">DELETE</code></li>
  <li><code class="highlighter-rouge">DROP</code> -&gt; enables the use of <code class="highlighter-rouge">DROP</code></li>
  <li><code class="highlighter-rouge">INSERT</code> -&gt; enables the use of <code class="highlighter-rouge">INSERT</code></li>
  <li><code class="highlighter-rouge">SELECT</code> -&gt; enables the use of <code class="highlighter-rouge">SELECT</code></li>
  <li><code class="highlighter-rouge">UPDATE</code> -&gt; enables the use of <code class="highlighter-rouge">UPDATE</code></li>
  <li><code class="highlighter-rouge">GRANT OPTION</code> -&gt; allows the user to remove or grant privileges to other users</li>
</ul>

<blockquote>
  <p>Note: to make the privileges active you might need to run <code class="highlighter-rouge">FLUSH PRIVILEGES;</code>.</p>
</blockquote>

<h3 id="revoke-privilege">Revoke Privilege</h3>

<p>The <code class="highlighter-rouge">REVOKE</code> sintax allows you to remove privileges from MySQL accounts.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">REVOKE</span> <span class="o">&lt;</span><span class="k">option</span><span class="o">&gt;</span> <span class="k">ON</span> <span class="o">&lt;</span><span class="n">db_name</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">TO</span> <span class="s1">'&lt;user_name&gt;'</span><span class="o">@</span><span class="s1">'&lt;host_name&gt;'</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="show-privileges">Show Privileges</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="n">GRANTS</span> <span class="k">FOR</span> <span class="s1">'&lt;user_name&gt;'</span><span class="o">@</span><span class="s1">'&lt;host_name&gt;'</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="backup-and-recovery">Backup and Recovery</h2>

<h3 id="backup-types">Backup Types</h3>

<h4 id="online-vs-offline">Online vs Offline:</h4>

<ol>
  <li><strong>Online</strong>: The server will keep running, so clients can connect to the database while doing the backup. However, cache issues can arise and it could compromise data integrity.</li>
  <li><strong>Offline</strong>: The server will be unavailable. This process will be simpler and there will be no risk of integrity issues or blocks.</li>
</ol>

<h4 id="physical-vs-logical">Physical vs Logical:</h4>

<h5 id="physical">Physical</h5>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- It is faster than a logical backup.
- It can be done online or offline.
- It might cause incompatibility issues between different database systems.
- Tools used for physical backups are: _mysqlbackup_ or system commands like `cp`, `scp`, `tar`...
</code></pre></div></div>

<h5 id="logical">Logical</h5>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- It is slower since the server must access database information and convert it to logical format (SQL statements).
- It can be only doe online.
- Better compatibility between different DBMS (DataBase Management System) such as MySQL and Oracle.
- For logical backups you can use `mysqldump` and `SELECT ... INTO OUTFILE` statement.
</code></pre></div></div>

<p>To export and import only the data of your database you can use the following sintax:</p>

<p><strong>EXPORT</strong></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="p">...</span> <span class="k">INTO</span> <span class="n">OUTFILE</span> <span class="s1">'&lt;file_name&gt;'</span> <span class="o">&lt;</span><span class="n">export_options</span><span class="o">&gt;</span>
    <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<p>e.g.</p>

<p>All the entries and columns together without any kind of separator:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">INTO</span> <span class="n">OUTFILE</span> <span class="s1">'/tmp/users.txt'</span>
    <span class="k">FROM</span> <span class="k">user</span><span class="p">;</span>
</code></pre></div></div>

<p>This is an example that produces a file in the comma-separated values (CSV) format:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">INTO</span> <span class="n">OUTFILE</span> <span class="s1">'/tmp/users.txt'</span>
    <span class="n">FIELDS</span> <span class="n">TERMINATED</span> <span class="k">BY</span> <span class="s1">','</span> <span class="n">OPTIONALLY</span> <span class="n">ENCLOSED</span> <span class="k">BY</span> <span class="s1">'"'</span>
    <span class="n">LINES</span> <span class="n">TERMINATED</span> <span class="k">BY</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span>
    <span class="k">FROM</span> <span class="k">user</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>IMPORT</strong></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">LOAD</span> <span class="k">DATA</span> <span class="n">INFILE</span> <span class="s1">'&lt;file_name&gt;'</span>
    <span class="k">INTO</span> <span class="k">TABLE</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
    <span class="n">FIELDS</span> <span class="o">&lt;</span><span class="n">import_options</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>Note: import and export options should match for the same backup.</p>
</blockquote>

<p>The <a href="https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html"><em>mysqldump</em></a> is a tool to create logical backups producing DML and DDL commands, so it will reproduce the original database object definitions and table data.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump &lt;options&gt; <span class="o">&gt;</span> &lt;file_name&gt;.sql
</code></pre></div></div>

<p>Some examples:</p>

<ul>
  <li>Backup all user databases:</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump <span class="nt">-u</span> root <span class="nt">-p</span> <span class="nt">--all-databases</span> <span class="o">&gt;</span> backup.slq
</code></pre></div></div>

<ul>
  <li>Backup a single database:</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump <span class="nt">-u</span> root <span class="nt">-p</span> <span class="nt">--databases</span> store <span class="o">&gt;</span> backup.slq
</code></pre></div></div>

<ul>
  <li>Backup a single table:</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump <span class="nt">-u</span> root <span class="nt">-p</span> store customer <span class="o">&gt;</span> backup.slq
</code></pre></div></div>

<blockquote>
  <p>Note: <em>mysqldump</em> is not compatible with Oracle databases.</p>
</blockquote>

<p>There are two ways to import a <em>sql</em> file:</p>

<ol>
  <li>Use a MySQL statement:</li>
</ol>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SOURCE</span> <span class="o">/</span><span class="n">path</span><span class="o">/&lt;</span><span class="n">file_name</span><span class="o">&gt;</span><span class="p">.</span><span class="k">sql</span>
</code></pre></div></div>

<ol>
  <li>Use CLI</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> root <span class="nt">-p</span> &lt; &lt;file_name&gt;.sql
</code></pre></div></div>

<h4 id="full-vs-incremental">Full vs Incremental:</h4>

<ol>
  <li><strong>Full</strong>: It includes the entired database managed by MySQL.</li>
  <li><strong>Incremental</strong>: It is the backup from the last full or incremental backup. To restore an incremental backup, the full and all the previous incremental backups are required.</li>
</ol>

<h2 id="views">Views</h2>

<p>Views are stored queries with name that allows the DB administrator to restrict direct access to tables and implement additional security measures, so you can grant or revoke permissions as you do with tables.</p>

<p>View entries can also be deleted or updated and these changes will be reflected in the tables used to create the view.</p>

<h3 id="create-view">Create View</h3>

<p>Views can be created from multiple <code class="highlighter-rouge">SELECT</code> statements or other views.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span>
    <span class="err">{</span><span class="n">ALGORITHM</span><span class="o">=&lt;</span><span class="n">UNDEFINED</span> <span class="o">|</span> <span class="n">MERGE</span> <span class="o">|</span> <span class="n">TEMPTABLE</span><span class="o">&gt;</span><span class="err">}</span>
    <span class="err">{</span><span class="k">DEFINER</span><span class="o">=&lt;</span><span class="k">user</span> <span class="o">|</span> <span class="k">CURRENT_USER</span><span class="o">&gt;</span><span class="err">}</span>
    <span class="err">{</span><span class="n">SQL_SECURITY</span><span class="o">=&lt;</span><span class="k">DEFINER</span> <span class="o">|</span> <span class="k">INVOKER</span><span class="o">&gt;</span><span class="err">}</span>
    <span class="k">VIEW</span> <span class="o">&lt;</span><span class="n">view_name</span><span class="o">&gt;</span>
    <span class="k">AS</span> <span class="k">SELECT</span> <span class="p">...</span>
    <span class="err">{</span><span class="k">WITH</span> <span class="k">CHECK</span> <span class="k">OPTION</span><span class="err">}</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>Note: Only <code class="highlighter-rouge">CREATE</code>, <code class="highlighter-rouge">VIEW</code> and <code class="highlighter-rouge">AS</code> clauses are mandatory.</p>
</blockquote>

<ul>
  <li><code class="highlighter-rouge">ALGORITHM</code>: <code class="highlighter-rouge">UNDEFINED</code> MySQL decides; <code class="highlighter-rouge">MERGE</code> changes on tables are allowed; <code class="highlighter-rouge">TEMPTABLE</code> changes are not allowed</li>
  <li><code class="highlighter-rouge">DEFINER</code>: adds creators name</li>
  <li><code class="highlighter-rouge">SQL_SECURITY</code>: defines permissions on the view: <code class="highlighter-rouge">DEFINER</code> permissions or <code class="highlighter-rouge">INVOKER</code>(default) permissions</li>
  <li><code class="highlighter-rouge">WITH CHECK OPTION</code>: <code class="highlighter-rouge">WITH CHECK OPTION</code> clause is used to prevent inserts or updates to rows which do not satisfy the <code class="highlighter-rouge">WHERE</code> statement. <code class="highlighter-rouge">LOCAL</code> will only affect to the actual view, <code class="highlighter-rouge">CASCADED</code> will affect views used to create the view</li>
</ul>

<h3 id="modify-a-view">Modify a View</h3>

<p>The <code class="highlighter-rouge">ALTER VIEW</code> clause is used to modify views.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="o">&lt;</span><span class="k">options</span><span class="o">&gt;</span>
<span class="k">VIEW</span> <span class="o">&lt;</span><span class="n">view_name</span><span class="o">&gt;</span>
<span class="k">AS</span> <span class="k">SELECT</span> <span class="p">...</span>
<span class="p">...;</span>
</code></pre></div></div>

<h3 id="remove-view">Remove View</h3>

<p>You can delete a view with the following sintax:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">VIEW</span> <span class="o">&lt;</span><span class="n">view_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="retrieve-views">Retrieve Views</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="k">CREATE</span> <span class="k">VIEW</span> <span class="o">&lt;</span><span class="n">view_name</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">views</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="triggers">Triggers</h2>

<p>A <strong>trigger</strong> is an routine activated or executed as a result of an action of type <code class="highlighter-rouge">INSERT</code>, <code class="highlighter-rouge">DELETE</code> or <code class="highlighter-rouge">UPDATE</code>.</p>

<blockquote>
  <p>Note: Before <em>MySQL 5.7.2</em>, only 6 triggers are allowed for each table. One trigger for each combination of time (<code class="highlighter-rouge">BEFORE</code>, <code class="highlighter-rouge">AFTER</code>) and action (<code class="highlighter-rouge">INSERT</code>, <code class="highlighter-rouge">UPDATE</code>, <code class="highlighter-rouge">DELETE</code>).</p>
</blockquote>

<h3 id="create-a-trigger">Create a Trigger</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TRIGGER</span> <span class="o">&lt;</span><span class="k">trigger_name</span><span class="o">&gt;</span>
    <span class="err">{</span><span class="k">BEFORE</span> <span class="o">|</span> <span class="k">AFTER</span><span class="err">}</span>
    <span class="err">{</span><span class="k">INSERT</span> <span class="o">|</span> <span class="k">UPDATE</span> <span class="o">|</span> <span class="k">DELETE</span><span class="err">}</span> <span class="k">ON</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
    <span class="k">FOR</span> <span class="k">EACH</span> <span class="k">ROW</span>
    <span class="k">BEGIN</span>
    <span class="o">&lt;</span><span class="n">sql_statement</span><span class="o">&gt;</span>
    <span class="k">END</span><span class="p">;</span>
</code></pre></div></div>

<p>MySQL provides the <code class="highlighter-rouge">OLD</code> and <code class="highlighter-rouge">NEW</code> keywords to access columns in the rows affected by a trigger.</p>

<ul>
  <li>In a <code class="highlighter-rouge">INSERT</code> trigger only <code class="highlighter-rouge">NEW</code> is avaiable, since there is not a previous version of the row.</li>
  <li>In a <code class="highlighter-rouge">DELETE</code> trigger only <code class="highlighter-rouge">OLD</code> can be used, since the row is removed.</li>
  <li><code class="highlighter-rouge">UPDATE</code> supports both <code class="highlighter-rouge">NEW</code> and <code class="highlighter-rouge">OLD</code>, the first one refers to a row after it is updated and the second one refers to a row before it is updated.</li>
</ul>

<h3 id="delete-a-trigger">Delete a Trigger</h3>

<p>To remove a trigger you can execute:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">DROP</span> <span class="k">TRIGGER</span> <span class="o">&lt;</span><span class="k">trigger_name</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="show-triggers">Show Triggers</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="n">TRIGGERS</span> <span class="err">{</span><span class="k">FROM</span> <span class="o">|</span> <span class="k">IN</span><span class="err">}</span> <span class="o">&lt;</span><span class="n">db_name</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">&lt;</span><span class="k">trigger_name</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="n">information_schema</span><span class="p">.</span><span class="n">triggers</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="events">Events</h2>

<p>Events are scheduled tasks that run at a particular time and are very similar to cron jobs.</p>

<p>Two types:</p>

<ul>
  <li>One time events.</li>
  <li>Periodical events.</li>
</ul>

<blockquote>
  <p>Note: the global sysmtem variable <code class="highlighter-rouge">event_scheduler</code> determines if events are enabled. Possible values: <code class="highlighter-rouge">ON</code> (activated), <code class="highlighter-rouge">OFF</code> (disactivated), <code class="highlighter-rouge">DISABLED</code> (the Event Scheduler state cannot be changed at runtime). To change the value: <code class="highlighter-rouge">SET GLOBAL EVENT_SCHEDULER={ON|OFF|DISABLED}</code> or serach for the prperty in <code class="highlighter-rouge">my.cnf</code>.</p>
</blockquote>

<h3 id="create-event">Create Event</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="n">EVENT</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span>
    <span class="k">ON</span> <span class="n">SCHEDULE</span> <span class="o">&lt;</span><span class="n">schedule</span><span class="o">&gt;</span>
    <span class="err">{</span><span class="k">ON</span> <span class="k">COMPLETION</span> <span class="err">{</span><span class="k">NOT</span><span class="err">}</span> <span class="k">PRESERVE</span><span class="err">}</span>
    <span class="err">{</span><span class="n">ENABLE</span> <span class="o">|</span> <span class="n">DISABLE</span> <span class="o">|</span> <span class="n">DISABLE</span> <span class="k">ON</span> <span class="n">SLAVE</span><span class="err">}</span>
    <span class="err">{</span><span class="k">COMMENT</span> <span class="s1">'string'</span><span class="err">}</span>
    <span class="k">DO</span> <span class="o">&lt;</span><span class="n">actions</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></div>

<blockquote>
  <p>Note: it <code class="highlighter-rouge">ENABLE</code> by default</p>
</blockquote>

<p><code class="highlighter-rouge">&lt;schedule&gt;</code> can be:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">AT</span><span class="err">{</span><span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span><span class="err">{</span><span class="o">&lt;</span><span class="n">interval</span><span class="o">&gt;</span><span class="err">}}</span> <span class="o">|</span> <span class="k">EVERY</span> <span class="o">&lt;</span><span class="n">interval</span><span class="o">&gt;</span>
<span class="err">{</span><span class="n">STARTS</span> <span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span> <span class="err">{</span><span class="o">&lt;</span><span class="n">inteval</span><span class="o">&gt;</span><span class="err">}}</span>
<span class="err">{</span><span class="n">ENDS</span> <span class="o">&lt;</span><span class="n">time</span><span class="o">&gt;</span> <span class="err">{</span><span class="o">&lt;</span><span class="n">interval</span><span class="o">&gt;</span><span class="err">}}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">&lt;interval&gt;</code> can be:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">{</span><span class="k">YEAR</span> <span class="o">|</span> <span class="n">QUARTER</span> <span class="o">|</span> <span class="k">MONTH</span> <span class="o">|</span> <span class="k">DAY</span> <span class="o">|</span> <span class="n">HOUR</span> <span class="o">|</span> <span class="k">MINUTE</span> <span class="o">|</span>
<span class="n">WEEK</span> <span class="o">|</span> <span class="k">SECOND</span> <span class="o">|</span> <span class="n">YEAR_MONTH</span> <span class="o">|</span> <span class="n">DAY_HOUR</span> <span class="o">|</span> <span class="n">DAY_MINUTE</span> <span class="o">|</span>
<span class="n">DAY_SECOND</span> <span class="o">|</span> <span class="n">HOUR_MINUTE</span> <span class="o">|</span> <span class="n">HOUR_SECOND</span> <span class="o">|</span> <span class="n">MINUTE_SECOND</span><span class="err">}</span>
</code></pre></div></div>

<h3 id="modify-event">Modify Event</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="n">EVENT</span> <span class="o">&lt;</span><span class="n">event_name</span><span class="o">&gt;</span>
    <span class="err">{</span><span class="k">ON</span> <span class="n">SCHEDULE</span> <span class="o">&lt;</span><span class="n">schedule</span><span class="o">&gt;</span><span class="err">}</span>
    <span class="err">{</span><span class="k">ON</span> <span class="k">COMPLETION</span> <span class="err">{</span><span class="k">NOT</span><span class="err">}</span> <span class="err">{</span><span class="k">PRESERVE</span><span class="err">}}</span>
    <span class="err">{</span><span class="k">RENAME</span> <span class="k">TO</span> <span class="o">&lt;</span><span class="n">new_event_name</span><span class="o">&gt;</span><span class="err">}</span>
    <span class="err">{</span><span class="n">ENABLE</span> <span class="o">|</span> <span class="n">DISABLE</span> <span class="o">|</span> <span class="n">DISABLE</span> <span class="k">ON</span> <span class="n">SLAVE</span><span class="err">}</span>
    <span class="err">{</span><span class="k">DO</span> <span class="o">&lt;</span><span class="n">actions</span><span class="o">&gt;</span><span class="err">}</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="show-events">Show Events</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SHOW</span> <span class="n">EVENTS</span><span class="p">;</span>
</code></pre></div></div>

</div>
  </main>

  <footer class="mt-auto py-3 text-center">

  <small class="text-muted mb-2">
    <i class="fas fa-code"></i> with <i class="fas fa-heart"></i>
    by <strong>Sergio Martin Rubio</strong>
  </small>

  <div class="container-fluid justify-content-center">

  

  

    
    
      

    
    
      

    
    

    
    <a class="social mx-1"  href="mailto:me@sergiomartinrubio.com"
       style="color: #6c757d"
       onMouseOver="this.style.color='#db4437'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fas fa-envelope fa-1x"></i>
    </a>
  
  

    
    

    
    <a class="social mx-1"  href="https://www.github.com/smartinrub"
       style="color: #6c757d"
       onMouseOver="this.style.color='#333333'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-github fa-1x"></i>
    </a>
  
  

    
    

    
    <a class="social mx-1"  href="https://www.linkedin.com/in/sergiomartinrubio"
       style="color: #6c757d"
       onMouseOver="this.style.color='#007bb5'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-linkedin-in fa-1x"></i>
    </a>
  
  

    
    

    
    <a class="social mx-1"  href="https://www.twitter.com/smartinrubio"
       style="color: #6c757d"
       onMouseOver="this.style.color='#1da1f2'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-twitter fa-1x"></i>
    </a>
  
  

</div>

  <div class="container-fluid justify-content-center">
      <a href="/privacy-policy/">Privacy Policy</a>
  </div>

</footer>

  <!-- GitHub Buttons -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- jQuery CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Popper.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

<!-- Bootstrap JS CDN -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- wow.js CDN & Activation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script>
<script> new WOW().init(); </script>

<!-- Card Animation jQuery -->
<script src="/assets/js/card-animation.js"></script>

<!-- Initialize all tooltips -->
<script>
$(function () {
    $('[data-toggle="tooltip"]').tooltip()
})
</script>

</body>

</html>